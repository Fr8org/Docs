@using HubWeb.ViewModels
<nav class="navbar navbar-fixed-top navbar-light">
    <div class="container">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#main-nav">
                <span class="sr-only">Menu</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a href="/" class="navbar-brand">
                <img src="/Content/img/dockyard_logo_white.png" alt="FR8" />
                <h1 class="hide">FR8 Company</h1>
            </a>
        </div>
        <div class="navbar-collapse collapse" id="main-nav" role="navigation">
            <!------SINGUP/LOGIN UPRIGHT OR WELCOMING MESSAGE----------------------------------->
            @using Microsoft.AspNet.Identity
            @if (Request.IsAuthenticated)
            {
                <div class="userinfo">
                    <p class="navbar-text">Hello
                        @if (User.IsInRole("Guest"))
                        {
                            <text>Guest User!</text>
                        }
                        else
                        {
                            <text>@User.Identity.GetUserName()!</text>
                        }
                    </p>
                    @if (User.IsInRole("Guest"))
                    {
                        <p class="navbar-text">
                            <a href="@NavLinks.BaseUrl/DockyardAccount/Logoff">Have an Account? Login</a>
                        </p>
                    }
                </div>
            }
            <!-- MENU -->
            <ul class="nav navbar-nav navbar-right">
                <!--How It Works-->
                <li><a href="@NavLinks.BaseUrl/#about">How it Works</a></li>
                <!--Services-->
                <li data-scroll="scrolling" class="dropdown">
                    <a data-target="#" href="@NavLinks.BaseUrl/#services" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false" title="Services">Services <span class="caret"></span></a>
                    <ul class="dropdown-menu">
                        <li><a href="@NavLinks.BaseUrl/Services/DocuSign">DocuSign</a></li>
                        <li><a href="@NavLinks.BaseUrl/Services/Salesforce">Salesforce.com</a></li>
                        @if (!User.Identity.IsAuthenticated)
                        {
                            <li><a href="@NavLinks.PlanDirectory">Plan Directory</a></li>
                        }
                        else
                        {
                            <script>
                                var goToPlanDirectory = function () {
                                    if ($ === 'undefined') {
                                        alert('Page loading error, jQuery not found');
                                    } else {
                                        $.ajax({
                                            url: '/api/v1/authentication/authenticatePlanDirectory',
                                            method:'POST'
                                        }).done(function(data) {
                                            var token = data.token;
                                            var url = '@NavLinks.PlanDirectory' + '/AuthenticateByToken?token=' + token;
                                            window.location.href = url;
                                        }).error(function(response) {
                                            alert("Error aquiring token: "+response.data);
                                        });
                                    }
                                }
                            </script>
                            <li><a href="#" onclick="goToPlanDirectory()">Plan Directory</a></li>
                        }
                        
                    </ul>
                </li>
                <!--Developers-->
                <li><a href="@NavLinks.Developers">Developers</a></li>
                <!--Company-->
                <li data-scroll="scrolling" class="dropdown">
                    <a href="@NavLinks.BaseUrl/#aboutus" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false" title="Company">Company <span class="caret"></span></a>
                    <ul class="dropdown-menu">
                        <li data-scroll="scrolling"><a href="@NavLinks.BaseUrl/Company/#vision">Vision</a></li>
                        <li data-scroll="scrolling"><a href="@NavLinks.BaseUrl/Company/#team">Team</a></li>
                        <li data-scroll="scrolling"><a href="@NavLinks.BaseUrl/Company/#press">Press Releases</a></li>
                        <li data-scroll="scrolling"><a href="@NavLinks.BaseUrl/Company/#location">Location</a></li>
                        <li data-scroll="scrolling"><a href="@NavLinks.BaseUrl/Company/#jobs">Jobs</a></li>
                    </ul>
                </li>
                <!--Contact-->
                <li><a href="@NavLinks.BaseUrl/Support" title="Contact">Contact</a></li>
                <!--Blog-->
                <li><a href="@NavLinks.Blog" target="_blank">Blog</a></li>
                <!--Login Button on Right-->
                @if (!Request.IsAuthenticated)
                {
                    <li>
                        <p class="navbar-btn">
                            <a href="@NavLinks.BaseUrl/DockyardAccount" class="btn btn-danger">Login/Register</a>
                        </p>
                    </li>
                }
                else
                {
                    <li>
                        <p class="navbar-btn">
                            <a href="@NavLinks.BaseUrl/dashboard/myaccount" class="btn btn-primary">My Account</a>
                        </p>
                    </li>
                }
            </ul>
        </div>
    </div>
</nav>
